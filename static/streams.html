<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glimpser - Stream Viewer</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="manifest" href="/static/manifest.json">
    <meta name="theme-color" content="#2563eb">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
            <h1>üîç Glimpser</h1>
        </div>
        <div class="nav-menu">
            <a href="/static/dashboard.html">Dashboard</a>
            <a href="/static/streams.html" class="active">Streams</a>
            <a href="/static/admin.html" id="admin-link" class="hidden">Admin</a>
            <button id="logout-btn" class="btn-secondary">Logout</button>
        </div>
    </nav>

    <main class="main-content">
        <div class="streams-header">
            <h2>Live Streams</h2>
            <div class="stream-controls">
                <button id="refresh-streams-btn" class="btn-secondary">Refresh</button>
                <select id="stream-filter" class="form-control">
                    <option value="">All Streams</option>
                    <option value="active">Active Only</option>
                    <option value="inactive">Inactive Only</option>
                </select>
            </div>
        </div>

        <div id="streams-grid" class="streams-grid">
            <div class="loading-card">
                <div class="spinner"></div>
                <p>Loading streams...</p>
            </div>
        </div>

        <div id="no-streams" class="empty-state hidden">
            <h3>No Streams Available</h3>
            <p>No video streams are currently configured or active.</p>
        </div>

        <div id="error-message" class="error-message hidden"></div>
    </main>

    <!-- Stream Modal -->
    <div id="stream-modal" class="modal modal-large hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="stream-modal-title">Stream Details</h3>
                <button data-action="close-modal" data-modal-id="stream-modal" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div id="stream-player" class="stream-player">
                    <img id="stream-image" src="" alt="Stream feed" class="hidden">
                    <div id="stream-placeholder" class="stream-placeholder">
                        <span>Stream unavailable</span>
                    </div>
                </div>
                <div class="stream-info">
                    <div class="info-row">
                        <label>Status:</label>
                        <span id="modal-stream-status" class="status-indicator"></span>
                    </div>
                    <div class="info-row">
                        <label>Source:</label>
                        <span id="modal-stream-source"></span>
                    </div>
                    <div class="info-row">
                        <label>Resolution:</label>
                        <span id="modal-stream-resolution">-</span>
                    </div>
                    <div class="info-row">
                        <label>FPS:</label>
                        <span id="modal-stream-fps">-</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/auth.js"></script>
    <script src="/static/js/streams.js"></script>
</body>
</html>
